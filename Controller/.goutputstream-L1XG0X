#! /usr/bin/python
#-*- coding: utf-8 -*-

#Version 2.0
#Author: Castillo Medina Aarón Martín.

import os
import xml.etree.ElementTree as et


def load_data_xml(document_name):
    category_id = 1
    options = []
    path = os.path.dirname(__file__)
    tree = et.parse(path + "/" + document_name)
    root = tree.getroot()

    for category in root:
        category_name = category.get('name')
        technique_id = 1

        for technique in category:
            technique_name = technique.get('name')
            technique_class = technique.get('class')
            technique_method = technique.get('method')        
            options.append((category_id,technique_id,technique_name,category_name + technique_class,technique_method))
            
            technique_id += 1
                
        category_id += 1
    
    return options



def write_data_xml(category_name,technique_name,technique_class,technique_method,document_name):
    path = os.path.dirname(__file__)
    tree = et.parse(path + "/" + document_name)
    root = tree.getroot()
    handler = root.find(category_name)
     
    if handler is None:
       return "ERROR. Class: Parser. Method: write_data_xml. Message: Category doesn't exist."

    else:
         new_child = et.SubElement(handler, "Technique class=\"" + technique_class + "\" method=\"" + technique_method + "\" name=\"" + technique_name+"\"")
 #        new_child.text = "class=\"" + technique_class + "\" method=\"" + technique_method + "\" name=\"" + technique_name+"\"";

    print et.tostring(root)
    #falta guardar cambios
